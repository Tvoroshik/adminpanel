<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
    <link href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.js"></script>
    <link href="https://cdn.datatables.net/buttons/1.5.4/css/buttons.dataTables.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.datatables.net/buttons/1.5.4/js/dataTables.buttons.js"></script>
    <link href="https://cdn.datatables.net/select/1.2.6/css/select.dataTables.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.datatables.net/select/1.2.6/js/dataTables.select.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/css/select2.min.css" rel="stylesheet"
        type="text/css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.2/js/select2.min.js"></script>
    <link href="https://sandbox.scoretility.com/static/js/Editor-1.8.1/css/editor.dataTables.css" rel="stylesheet"
        type="text/css" />
    <script src="https://sandbox.scoretility.com/static/js/Editor-1.8.1/js/dataTables.editor.js"></script>
    <link rel=stylesheet type=text/css href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.css">
    <!--
      <link rel=stylesheet type=text/css href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.structure.css">
      <link rel=stylesheet type=text/css href="https://code.jquery.com/ui/1.12.1/themes/ui-lightness/jquery-ui.theme.css">
       -->
    <link rel=stylesheet type=text/css href="https://cdn.datatables.net/1.10.18/css/dataTables.jqueryui.css?v=1.10.18">
    <link rel=stylesheet type=text/css href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.jqueryui.css?v=1.5.2">
    <link rel=stylesheet type=text/css
        href="https://cdn.datatables.net/fixedcolumns/3.2.5/css/fixedColumns.jqueryui.css?v=3.2.5">
    <link rel=stylesheet type=text/css
        href="https://sandbox.scoretility.com/static/js/Editor-1.8.1/css/editor.jqueryui.css?v=1539093792">
    <link rel=stylesheet type=text/css href="https://cdn.datatables.net/select/1.2.6/css/select.jqueryui.css?v=1.2.6">

    <script type="text/javascript" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/1.10.18/js/dataTables.jqueryui.js?v=1.10.18"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.jqueryui.js?v=1.5.2"></script>
    <script type="text/javascript"
        src="https://cdn.datatables.net/fixedcolumns/3.2.5/js/dataTables.fixedColumns.js?v=3.2.5"></script>
    <script src="https://sandbox.scoretility.com/static/js/Editor-1.8.1/js/editor.jqueryui.js"></script>

    <style>
        div.selectize-dropdown {
            z-index: 102;
        }

        body {
            background: #fff;
        }
    </style>
</head>


<body>
    <table id=tbl>
        <thead>
            <tr>
                <th></th>
                <th id="1">col0</th>
                <th id="2">col1</th>
                <th id="3">col2</th>
                <th id="4">col3</th>
                <th id="5">col4</th>
                <th id="6">col5</th>
                <th id="7">col6</th>
                <th id="8">col7</th>
            </tr>
        </thead>
        </tbody>
    </table>
    <script>

        var dataSet = [];
        var data = [];
        var new1;
        var new2;
        var new1;
        var new2;
        var variable1;
        var variable2;
        var variable3;
        var variable4;
        var variable5;
        var variable6;
        var variable7;
        var variable8;
        var column1;
        var column2;
        var column3;
        var column4;
        var column5;
        var column6;
        var column7;
        var column8;
        var start = 0;
        var datagraph = [];

        window.onstorage = event => {
            if (event.key == 'answ-tree') {

                new1 = event.newValue;
                new2 = new1.split(';');


                //console.log('new2', new2);
                // console.log('new2[0]', new2[0]);
                sessionStorage.removeItem('answ-tree');

                datagraph += new2 + ';';
                start++;
                console.log('start', start);
                variable1 = new2[0];
                variable2 = new2[1];
                variable3 = new2[2];
                variable4 = new2[3];
                variable4 = new2[4];
                variable5 = new2[5];
                variable6 = new2[6];
                variable7 = new2[7];
                variable8 = new2[8];

                //console.log('variable1', variable1);
                //console.log('variable2', variable2);
                //console.log('variable3', variable3);
                //console.log('variable4', variable4);
                //console.log('variable5', variable5);
                //console.log('variable6', variable6);
                //console.log('variable7', variable7);
                //console.log('variable8', variable8);

                if (variable8 == 'first') {
                    column1 = new2[0];
                    document.getElementById('1').innerHTML = column1;
                    column2 = new2[1];
                    document.getElementById('2').innerHTML = column2;
                    column3 = new2[2];
                    document.getElementById('3').innerHTML = column3;
                    column4 = new2[3];
                    document.getElementById('4').innerHTML = column4;
                    column5 = new2[4];
                    document.getElementById('5').innerHTML = column5;
                    column6 = new2[5];
                    document.getElementById('6').innerHTML = column6;
                    column7 = new2[6];
                    document.getElementById('7').innerHTML = column7;
                    column8 = new2[7];
                    document.getElementById('8').innerHTML = column8;
                    //console.log('column1', column1);
                    //console.log('column2', column2);
                    //console.log('column3', column3);
                    //console.log('column4', column4);
                    //console.log('column5', column5);
                    //console.log('column6', column6);
                    //console.log('column7', column7);
                    //console.log('column8', column8);
                }
                else if ( start < 7) {
                    new2.pop();
      

                    console.log('new2', new2);
               
                    var data = []
                    for (i = 1; i < 7; i++) {
                        data.push({
                            id: i,
                            a: new2[0],
                            b: new2[1],
                            c: new2[2],
                            d: new2[3],
                            e: new2[4],
                            f: new2[5],
                            g: new2[6],
                            h: new2[7],
                        })
                       }
                    console.log('data', data)
              

                    var editor = new $.fn.dataTable.Editor({
                        ajax: "./staff.php",
                        table: '#tbl',
                        idSrc: 'id',
                        fields: [
                            { label: column1, name: column1 },
                            { label: column2, name: column2 },
                            { label: column3, name: column3 },
                            { label: column4, name: column4 },
                            { label: column5, name: column5 },
                            { label: column6, name: column6 },
                            { label: column7, name: column7 },
                            { label: column8, name: column8 },
                        ],
                    });

                    var table = $('#tbl')
                        .DataTable({
                            ajax: "./staff.php",
                            dom: 'lBfrtip',
                            data: data,
                            columns: [
                                {
                                    data: null,
                                    defaultContent: '',
                                    className: 'select-checkbox',
                                    orderable: false
                                },
                                { data: 'a', className: 'dt-body-center' },
                                { data: 'b', className: 'dt-body-center' },
                                { data: 'c', className: 'dt-body-center' },
                                { data: 'd', className: 'dt-body-center' },
                                { data: 'e', className: 'dt-body-center' },
                                { data: 'f', className: 'dt-body-center' },
                                { data: 'g', className: 'dt-body-center' },
                                { data: 'h', className: 'dt-body-center' }
                            ],
                            "bDestroy": true,
                            select: true,
                            buttons: [
                                { extend: 'create', editor: editor },
                                { extend: 'edit', editor: editor },
                                { extend: 'remove', editor: editor },
                            ],
                        });
                }
            }
        }
    
    


    </script>
</body>

</html>